<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="FitJourney Workout Planner - Plan your personalized workout session from our extensive exercise library." />
  <meta name="keywords" content="Workout, Planner, Exercise, AI, Fitness, FitJourney" />
  <meta name="author" content="FitJourney Team" />
  <title>Workout Planner - FitJourney</title>
  
  <!-- Main CSS Stylesheets -->
  <link rel="stylesheet" href="css/components/workout-planner.css" />
  <link rel="stylesheet" href="css/main.css" />
  
  <!-- Material Icons for UI Elements -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
  <!-- HEADER: Branding and Navigation -->
  <header class="workout-header">
    <div class="container">
      <div class="header-left">
        <a href="index.html" class="logo" aria-label="FitJourney Home">
          <img src="images/Fit X.jpg" alt="FitJourney Logo" />
          <span>FitJourney</span>
        </a>
        <nav class="nav desktop-nav" aria-label="Primary Navigation">
          <ul>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="library.html">Exercise Library</a></li>
            <li><a href="workout-session.html">Workout Session</a></li>
            <li><a href="progress.html">Progress</a></li>
            <li><a href="settings.html">Settings</a></li>
            <li><a href="workout-planner.html" class="active">Workout Planner</a></li>
          </ul>
        </nav>
      </div>
      <div class="header-right">
        <div class="theme-toggle">
          <button id="theme-toggle-btn" aria-label="Toggle theme">
            <i class="material-icons">dark_mode</i>
          </button>
        </div>
        <div class="user-profile" id="userProfile">
          <div class="avatar">
            <img src="images/profile-placeholder.jpg" alt="User Profile" />
          </div>
          <span class="user-name">John Doe</span>
          <i class="material-icons dropdown-arrow">keyboard_arrow_down</i>
          <!-- User Dropdown -->
          <div class="user-dropdown" id="userDropdown">
            <a href="profile.html" class="dropdown-item">Profile</a>
            <a href="settings.html" class="dropdown-item">Settings</a>
            <a href="#" class="dropdown-item">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <!-- MAIN CONTENT AREA -->
  <main class="workout-main container">
    <div class="page-header">
      <h1>Plan Your Workout</h1>
      <p>Create a personalized workout routine with our advanced scheduling system and exercise library.</p>
    </div>

    <!-- WEEKLY SCHEDULE SECTION -->
    <section class="schedule-section">
      <div class="section-header">
        <h2><i class="material-icons">calendar_today</i> Weekly Schedule</h2>
        <div class="schedule-actions">
          <button class="btn btn-secondary" id="clear-schedule-btn">
            <i class="material-icons">clear_all</i> Clear Schedule
          </button>
          <button class="btn btn-primary" id="save-schedule-btn">
            <i class="material-icons">save</i> Save Schedule
          </button>
        </div>
      </div>
      
      <div class="weekly-calendar">
        <div class="time-slots">
          <div class="time-slot-header">Time</div>
          <div class="time-slot" data-time="06:00">6:00 AM</div>
          <div class="time-slot" data-time="08:00">8:00 AM</div>
          <div class="time-slot" data-time="12:00">12:00 PM</div>
          <div class="time-slot" data-time="17:00">5:00 PM</div>
          <div class="time-slot" data-time="19:00">7:00 PM</div>
        </div>
        
        <div class="days-grid">
          <div class="day-column" data-day="monday">
            <div class="day-header">
              <span class="day-name">Monday</span>
              <span class="day-date" id="monday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="monday" data-time="06:00"></div>
              <div class="workout-slot" data-day="monday" data-time="08:00"></div>
              <div class="workout-slot" data-day="monday" data-time="12:00"></div>
              <div class="workout-slot" data-day="monday" data-time="17:00"></div>
              <div class="workout-slot" data-day="monday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="tuesday">
            <div class="day-header">
              <span class="day-name">Tuesday</span>
              <span class="day-date" id="tuesday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="tuesday" data-time="06:00"></div>
              <div class="workout-slot" data-day="tuesday" data-time="08:00"></div>
              <div class="workout-slot" data-day="tuesday" data-time="12:00"></div>
              <div class="workout-slot" data-day="tuesday" data-time="17:00"></div>
              <div class="workout-slot" data-day="tuesday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="wednesday">
            <div class="day-header">
              <span class="day-name">Wednesday</span>
              <span class="day-date" id="wednesday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="wednesday" data-time="06:00"></div>
              <div class="workout-slot" data-day="wednesday" data-time="08:00"></div>
              <div class="workout-slot" data-day="wednesday" data-time="12:00"></div>
              <div class="workout-slot" data-day="wednesday" data-time="17:00"></div>
              <div class="workout-slot" data-day="wednesday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="thursday">
            <div class="day-header">
              <span class="day-name">Thursday</span>
              <span class="day-date" id="thursday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="thursday" data-time="06:00"></div>
              <div class="workout-slot" data-day="thursday" data-time="08:00"></div>
              <div class="workout-slot" data-day="thursday" data-time="12:00"></div>
              <div class="workout-slot" data-day="thursday" data-time="17:00"></div>
              <div class="workout-slot" data-day="thursday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="friday">
            <div class="day-header">
              <span class="day-name">Friday</span>
              <span class="day-date" id="friday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="friday" data-time="06:00"></div>
              <div class="workout-slot" data-day="friday" data-time="08:00"></div>
              <div class="workout-slot" data-day="friday" data-time="12:00"></div>
              <div class="workout-slot" data-day="friday" data-time="17:00"></div>
              <div class="workout-slot" data-day="friday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="saturday">
            <div class="day-header">
              <span class="day-name">Saturday</span>
              <span class="day-date" id="saturday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="saturday" data-time="06:00"></div>
              <div class="workout-slot" data-day="saturday" data-time="08:00"></div>
              <div class="workout-slot" data-day="saturday" data-time="12:00"></div>
              <div class="workout-slot" data-day="saturday" data-time="17:00"></div>
              <div class="workout-slot" data-day="saturday" data-time="19:00"></div>
            </div>
          </div>
          
          <div class="day-column" data-day="sunday">
            <div class="day-header">
              <span class="day-name">Sunday</span>
              <span class="day-date" id="sunday-date"></span>
            </div>
            <div class="workout-slots">
              <div class="workout-slot" data-day="sunday" data-time="06:00"></div>
              <div class="workout-slot" data-day="sunday" data-time="08:00"></div>
              <div class="workout-slot" data-day="sunday" data-time="12:00"></div>
              <div class="workout-slot" data-day="sunday" data-time="17:00"></div>
              <div class="workout-slot" data-day="sunday" data-time="19:00"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="workout-planner-layout">
      <!-- Left Column: Filters and Options -->
      <section class="planner-sidebar">
        <!-- WORKOUT CATEGORIES -->
        <div class="sidebar-section">
          <h2><i class="material-icons">category</i> Workout Categories</h2>
          <div class="category-options" role="group" aria-label="Workout Categories">
            <button class="category-btn active" data-category="all">
              <i class="material-icons">fitness_center</i>
              <span>All Workouts</span>
            </button>
            <button class="category-btn" data-category="strength">
              <i class="material-icons">sports_martial_arts</i>
              <span>Strength</span>
            </button>
            <button class="category-btn" data-category="cardio">
              <i class="material-icons">directions_run</i>
              <span>Cardio</span>
            </button>
            <button class="category-btn" data-category="flexibility">
              <i class="material-icons">self_improvement</i>
              <span>Flexibility</span>
            </button>
            <button class="category-btn" data-category="hiit">
              <i class="material-icons">whatshot</i>
              <span>HIIT</span>
            </button>
            <button class="category-btn" data-category="yoga">
              <i class="material-icons">spa</i>
              <span>Yoga</span>
            </button>
          </div>
        </div>

        <div class="sidebar-section">
          <h2><i class="material-icons">accessibility_new</i> Muscle Groups</h2>
          <div class="filter-options" role="group" aria-label="Filter Exercises">
            <button class="filter-btn active" data-filter="all">
              <i class="material-icons">fitness_center</i>
              <span>All</span>
            </button>
            <button class="filter-btn" data-filter="back">
              <i class="material-icons">accessibility_new</i>
              <span>Back</span>
            </button>
            <button class="filter-btn" data-filter="cardio">
              <i class="material-icons">directions_run</i>
              <span>Cardio</span>
            </button>
            <button class="filter-btn" data-filter="chest">
              <i class="material-icons">accessibility</i>
              <span>Chest</span>
            </button>
            <button class="filter-btn" data-filter="lower arms">
              <i class="material-icons">front_hand</i>
              <span>Lower Arms</span>
            </button>
            <button class="filter-btn" data-filter="lower legs">
              <i class="material-icons">airline_seat_legroom_extra</i>
              <span>Lower Legs</span>
            </button>
            <button class="filter-btn" data-filter="neck">
              <i class="material-icons">face</i>
              <span>Neck</span>
            </button>
            <button class="filter-btn" data-filter="shoulders">
              <i class="material-icons">sports_martial_arts</i>
              <span>Shoulders</span>
            </button>
            <button class="filter-btn" data-filter="upper arms">
              <i class="material-icons">sports_handball</i>
              <span>Upper Arms</span>
            </button>
            <button class="filter-btn" data-filter="upper legs">
              <i class="material-icons">airline_seat_legroom_normal</i>
              <span>Upper Legs</span>
            </button>
            <button class="filter-btn" data-filter="waist">
              <i class="material-icons">straighten</i>
              <span>Waist</span>
            </button>
          </div>
        </div>

        <div class="sidebar-section">
          <h2><i class="material-icons">build</i> Equipment</h2>
          <div class="equipment-filter">
            <select id="equipment" class="form-select">
              <option value="">All Equipment</option>
              <option value="assisted">Assisted</option>
              <option value="band">Band</option>
              <option value="barbell">Barbell</option>
              <option value="body weight">Body Weight</option>
              <option value="bosu ball">Bosu Ball</option>
              <option value="cable">Cable</option>
              <option value="dumbbell">Dumbbell</option>
              <option value="elliptical machine">Elliptical Machine</option>
              <option value="ez barbell">EZ Barbell</option>
              <option value="hammer">Hammer</option>
              <option value="kettlebell">Kettlebell</option>
              <option value="leverage machine">Leverage Machine</option>
              <option value="medicine ball">Medicine Ball</option>
              <option value="olympic barbell">Olympic Barbell</option>
              <option value="resistance band">Resistance Band</option>
              <option value="roller">Roller</option>
              <option value="rope">Rope</option>
              <option value="skierg machine">Skierg Machine</option>
              <option value="sled machine">Sled Machine</option>
              <option value="smith machine">Smith Machine</option>
              <option value="stability ball">Stability Ball</option>
              <option value="stationary bike">Stationary Bike</option>
              <option value="stepmill machine">Stepmill Machine</option>
              <option value="tire">Tire</option>
              <option value="trap bar">Trap Bar</option>
              <option value="upper body ergometer">Upper Body Ergometer</option>
              <option value="weighted">Weighted</option>
              <option value="wheel roller">Wheel Roller</option>
            </select>
          </div>
        </div>

        <div class="sidebar-section">
          <h2><i class="material-icons">settings</i> Workout Settings</h2>
          <div class="workout-settings">
            <div class="setting-group">
              <label for="session-duration">
                <i class="material-icons">timer</i>
                Session Duration
              </label>
              <div class="input-with-unit">
                <input type="number" id="session-duration" min="10" max="120" value="45" />
                <span class="unit">min</span>
              </div>
            </div>
            
            <div class="setting-group">
              <label for="difficulty">
                <i class="material-icons">trending_up</i>
                Difficulty Level
              </label>
              <select id="difficulty" class="form-select">
                <option value="beginner">Beginner</option>
                <option value="intermediate" selected>Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>
            
            <div class="setting-group">
              <label for="rest-timer">
                <i class="material-icons">pause</i>
                Rest Between Sets
              </label>
              <div class="input-with-unit">
                <input type="number" id="rest-timer" min="10" max="180" value="60" />
                <span class="unit">sec</span>
              </div>
            </div>
            
            <div class="setting-group">
              <label for="transition-timer">
                <i class="material-icons">swap_horiz</i>
                Transition Time
              </label>
              <div class="input-with-unit">
                <input type="number" id="transition-timer" min="5" max="60" value="15" />
                <span class="unit">sec</span>
              </div>
            </div>
            
            <div class="setting-group">
              <div class="checkbox-wrapper">
                <input type="checkbox" id="custom-workout" />
                <label for="custom-workout">
                  <i class="material-icons">smart_toy</i>
                  Generate AI Workout
                </label>
                <span class="tooltip" data-tooltip="Let our AI create a balanced workout based on your selections">
                  <i class="material-icons">info</i>
                </span>
              </div>
            </div>
          </div>
          
          <button id="generate-workout-btn" class="btn btn-primary">
            <i class="material-icons">fitness_center</i> Generate Workout
          </button>
        </div>
      </section>

      <!-- Right Column: Exercise Browser and Generated Workout -->
      <section class="planner-content">
        <div class="content-section exercise-browser">
          <div class="section-header">
            <h2><i class="material-icons">search</i> Exercise Browser</h2>
            <div class="search-container">
              <input type="text" id="exercise-search" placeholder="Search exercises..." />
              <button id="search-btn" class="btn-icon">
                <i class="material-icons">search</i>
              </button>
            </div>
          </div>
          
          <div id="loading-indicator" class="loading-indicator hidden">
            <div class="spinner"></div>
            <p>Loading exercises...</p>
          </div>
          
          <div id="exercise-grid" class="exercise-grid">
            <!-- Exercise cards will be dynamically generated here -->
          </div>
          
          <div id="pagination" class="pagination">
            <button id="prev-page" class="btn btn-secondary" disabled>
              <i class="material-icons">chevron_left</i> Previous
            </button>
            <span id="page-indicator">Page 1 of 1</span>
            <button id="next-page" class="btn btn-secondary">
              Next <i class="material-icons">chevron_right</i>
            </button>
          </div>
        </div>

        <div id="generated-workout" class="content-section generated-workout hidden">
          <div class="section-header">
            <h2><i class="material-icons">assignment</i> Your Custom Workout</h2>
            <div class="workout-actions">
              <button id="schedule-workout-btn" class="btn btn-accent">
                <i class="material-icons">schedule</i> Schedule
              </button>
              <button id="clear-workout-btn" class="btn btn-secondary">
                <i class="material-icons">clear</i> Clear
              </button>
              <button id="save-workout-btn" class="btn btn-secondary">
                <i class="material-icons">save</i> Save
              </button>
              <button id="print-workout-btn" class="btn btn-secondary">
                <i class="material-icons">print</i> Print
              </button>
            </div>
          </div>
          
          <div id="workout-summary" class="workout-summary">
            <div class="summary-item">
              <i class="material-icons">timer</i>
              <div class="summary-details">
                <span class="summary-value" id="total-duration">45</span>
                <span class="summary-label">Minutes</span>
              </div>
            </div>
            <div class="summary-item">
              <i class="material-icons">fitness_center</i>
              <div class="summary-details">
                <span class="summary-value" id="exercise-count">0</span>
                <span class="summary-label">Exercises</span>
              </div>
            </div>
            <div class="summary-item">
              <i class="material-icons">whatshot</i>
              <div class="summary-details">
                <span class="summary-value" id="difficulty-level">Intermediate</span>
                <span class="summary-label">Difficulty</span>
              </div>
            </div>
            <div class="summary-item">
              <i class="material-icons">category</i>
              <div class="summary-details">
                <span class="summary-value" id="workout-category">Mixed</span>
                <span class="summary-label">Category</span>
              </div>
            </div>
          </div>
          
          <div class="workout-list-container">
            <h3>Exercise List</h3>
            <ul id="workout-list" class="workout-list">
              <!-- Workout exercises will be dynamically generated here -->
            </ul>
          </div>
          
          <div class="workout-actions-bottom">
            <button id="start-workout-btn" class="btn btn-primary">
              <i class="material-icons">play_arrow</i> Start Workout Session
            </button>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- SCHEDULE WORKOUT MODAL -->
  <div id="schedule-modal" class="modal">
    <div class="modal-content">
      <button class="modal-close">&times;</button>
      <div class="modal-header">
        <h3><i class="material-icons">schedule</i> Schedule Workout</h3>
      </div>
      <div class="modal-body">
        <div class="schedule-form">
          <div class="form-group">
            <label for="schedule-day">Select Day</label>
            <select id="schedule-day" class="form-select">
              <option value="monday">Monday</option>
              <option value="tuesday">Tuesday</option>
              <option value="wednesday">Wednesday</option>
              <option value="thursday">Thursday</option>
              <option value="friday">Friday</option>
              <option value="saturday">Saturday</option>
              <option value="sunday">Sunday</option>
            </select>
          </div>
          <div class="form-group">
            <label for="schedule-time">Select Time</label>
            <select id="schedule-time" class="form-select">
              <option value="06:00">6:00 AM</option>
              <option value="08:00">8:00 AM</option>
              <option value="12:00">12:00 PM</option>
              <option value="17:00">5:00 PM</option>
              <option value="19:00">7:00 PM</option>
            </select>
          </div>
          <div class="form-group">
            <label for="workout-name">Workout Name</label>
            <input type="text" id="workout-name" class="form-input" placeholder="Enter workout name..." />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancel-schedule-btn">Cancel</button>
        <button class="btn btn-primary" id="confirm-schedule-btn">Schedule Workout</button>
      </div>
    </div>
  </div>

  <!-- AI Chatbot Integration -->
  <div id="ai-chatbot" class="ai-chatbot hidden" role="dialog" aria-label="AI Workout Assistant">
    <div class="chat-header">
      <h3><i class="material-icons">smart_toy</i> Workout Assistant</h3>
      <button id="close-chat" aria-label="Close Chat">
        <i class="material-icons">close</i>
      </button>
    </div>
    <div class="chat-body" id="chat-body">
      <div class="chat-message bot">Hello! I'm your workout assistant. How can I help you plan your workout today?</div>
    </div>
    <div class="chat-footer">
      <input type="text" id="chat-input" placeholder="Ask me anything about workouts..." aria-label="Chat input" />
      <button id="send-chat" aria-label="Send Message"><i class="material-icons">send</i></button>
    </div>
  </div>
  
  <!-- Chat Toggle Button -->
  <button id="chat-toggle" class="chat-toggle" aria-label="Chat with our AI Assistant">
    <i class="material-icons">chat</i>
  </button>
  
  <!-- Exercise Detail Modal -->
  <div id="exercise-modal" class="modal">
    <div class="modal-content">
      <button class="modal-close">&times;</button>
      <div id="exercise-detail"></div>
    </div>
  </div>
  
  <!-- FOOTER -->
  <footer class="workout-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <img src="images/Fit X.jpg" alt="FitJourney Logo" />
          <span>FitJourney</span>
        </div>
        
        <div class="footer-links">
          <div class="footer-section">
            <h4>Features</h4>
            <ul>
              <li><a href="#">Workout Planner</a></li>
              <li><a href="#">Exercise Library</a></li>
              <li><a href="#">Progress Tracking</a></li>
              <li><a href="#">Nutrition</a></li>
            </ul>
          </div>
          
          <div class="footer-section">
            <h4>Support</h4>
            <ul>
              <li><a href="#">Help Center</a></li>
              <li><a href="#">Contact Us</a></li>
              <li><a href="#">FAQs</a></li>
            </ul>
          </div>
        </div>
        
        <div class="footer-social">
          <a href="#" aria-label="Facebook"><i class="material-icons">facebook</i></a>
          <a href="#" aria-label="Twitter"><i class="material-icons">twitter</i></a>
          <a href="#" aria-label="Instagram"><i class="material-icons">instagram</i></a>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 FitJourney. All rights reserved.</p>
      </div>
    </div>
  </footer>
  
  <!-- Include the enhanced workout planner JS module -->
  <script type="module" src="js/modules/workout-planner.js"></script>
  <script type="module" src="js/modules/chatbot.js"></script>

<script>
  // ==========================================================================
// Mobile Menu Handler - Enhanced Navigation for Small Screens
// ==========================================================================

class MobileMenuHandler {
  constructor() {
    this.init();
  }

  init() {
    this.createMobileMenuToggle();
    this.setupEventListeners();
    this.handleResize();
  }

  createMobileMenuToggle() {
    // Check if mobile menu toggle already exists
    let mobileToggle = document.getElementById('mobile-menu-toggle');
    
    if (!mobileToggle) {
      // Create mobile menu toggle button
      mobileToggle = document.createElement('button');
      mobileToggle.id = 'mobile-menu-toggle';
      mobileToggle.className = 'mobile-menu-toggle';
      mobileToggle.setAttribute('aria-label', 'Toggle mobile menu');
      mobileToggle.setAttribute('aria-expanded', 'false');
      mobileToggle.innerHTML = `
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      `;

      // Insert the toggle button in the header
      const headerRight = document.querySelector('.header-right');
      if (headerRight) {
        headerRight.insertBefore(mobileToggle, headerRight.firstChild);
      }
    }

    // Create mobile navigation overlay if it doesn't exist
    let mobileNav = document.getElementById('mobile-nav-overlay');
    if (!mobileNav) {
      mobileNav = document.createElement('div');
      mobileNav.id = 'mobile-nav-overlay';
      mobileNav.className = 'mobile-nav-overlay';
      
      // Clone the desktop navigation
      const desktopNav = document.querySelector('.nav.desktop-nav');
      if (desktopNav) {
        const navClone = desktopNav.cloneNode(true);
        navClone.className = 'mobile-nav-menu';
        navClone.setAttribute('role', 'navigation');
        navClone.setAttribute('aria-label', 'Mobile Navigation');
        
        // Add close button to mobile nav
        const closeBtn = document.createElement('button');
        closeBtn.className = 'mobile-nav-close';
        closeBtn.setAttribute('aria-label', 'Close mobile menu');
        closeBtn.innerHTML = '<i class="material-icons">close</i>';
        
        // Create mobile nav container
        const mobileNavContainer = document.createElement('div');
        mobileNavContainer.className = 'mobile-nav-container';
        mobileNavContainer.appendChild(closeBtn);
        mobileNavContainer.appendChild(navClone);
        
        mobileNav.appendChild(mobileNavContainer);
        document.body.appendChild(mobileNav);
      }
    }
  }

  setupEventListeners() {
    const mobileToggle = document.getElementById('mobile-menu-toggle');
    const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
    const mobileNavClose = document.querySelector('.mobile-nav-close');
    const mobileNavLinks = document.querySelectorAll('.mobile-nav-menu a');

    // Toggle mobile menu
    if (mobileToggle) {
      mobileToggle.addEventListener('click', (e) => {
        e.preventDefault();
        this.toggleMobileMenu();
      });
    }

    // Close mobile menu when clicking overlay
    if (mobileNavOverlay) {
      mobileNavOverlay.addEventListener('click', (e) => {
        if (e.target === mobileNavOverlay) {
          this.closeMobileMenu();
        }
      });
    }

    // Close mobile menu when clicking close button
    if (mobileNavClose) {
      mobileNavClose.addEventListener('click', (e) => {
        e.preventDefault();
        this.closeMobileMenu();
      });
    }

    // Close mobile menu when clicking navigation links
    mobileNavLinks.forEach(link => {
      link.addEventListener('click', () => {
        this.closeMobileMenu();
      });
    });

    // Close mobile menu on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        this.closeMobileMenu();
      }
    });

    // Handle window resize
    window.addEventListener('resize', () => {
      this.handleResize();
    });

    // Prevent body scroll when mobile menu is open
    this.preventBodyScroll();
  }

  toggleMobileMenu() {
    const mobileToggle = document.getElementById('mobile-menu-toggle');
    const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
    
    if (mobileNavOverlay && mobileToggle) {
      const isOpen = mobileNavOverlay.classList.contains('active');
      
      if (isOpen) {
        this.closeMobileMenu();
      } else {
        this.openMobileMenu();
      }
    }
  }

  openMobileMenu() {
    const mobileToggle = document.getElementById('mobile-menu-toggle');
    const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
    
    if (mobileNavOverlay && mobileToggle) {
      mobileNavOverlay.classList.add('active');
      mobileToggle.classList.add('active');
      mobileToggle.setAttribute('aria-expanded', 'true');
      document.body.classList.add('mobile-menu-open');
      
      // Focus management
      const firstLink = mobileNavOverlay.querySelector('a');
      if (firstLink) {
        setTimeout(() => firstLink.focus(), 100);
      }
    }
  }

  closeMobileMenu() {
    const mobileToggle = document.getElementById('mobile-menu-toggle');
    const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
    
    if (mobileNavOverlay && mobileToggle) {
      mobileNavOverlay.classList.remove('active');
      mobileToggle.classList.remove('active');
      mobileToggle.setAttribute('aria-expanded', 'false');
      document.body.classList.remove('mobile-menu-open');
      
      // Return focus to toggle button
      mobileToggle.focus();
    }
  }

  handleResize() {
    // Close mobile menu if screen becomes larger
    if (window.innerWidth > 768) {
      this.closeMobileMenu();
    }
  }

  preventBodyScroll() {
    // Prevent body scroll when mobile menu is open
    const style = document.createElement('style');
    style.textContent = `
      body.mobile-menu-open {
        overflow: hidden;
        position: fixed;
        width: 100%;
        height: 100%;
      }
    `;
    document.head.appendChild(style);
  }
}

// Initialize mobile menu when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  new MobileMenuHandler();
});

// Handle dynamic content loading
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    new MobileMenuHandler();
  });
} else {
  new MobileMenuHandler();
}
</script>
</body>
</html>